/* ===== 基本・黒画面防止 ===== */
*{box-sizing:border-box}
html{height:100%;-webkit-text-size-adjust:100%}
body{
  margin:0;background:#000;color:#eee;
  font-family:"dnp-shuei-gothic-kin-std","Yu Gothic","Hiragino Kaku Gothic ProN",Meiryo,sans-serif;
  -webkit-font-smoothing:antialiased;
}
.screen{min-height:100vh;width:100%;padding:2vh 6% 6%;
  justify-content:flex-start;align-items:flex-start;text-align:center;position:relative}
.center{max-width:760px;width:100%;margin:0 auto}
.spaced{letter-spacing:.22em;line-height:1.9}
.percent{margin-top:.6rem;color:#777}

/* 見出し（モバイル安全） */
.kaiki{color:#8b0000;text-shadow:0 0 12px rgba(139,0,0,.35);
  font-size:clamp(22px,9vw,40px);letter-spacing:.06em;text-wrap:balance}
.who-line{color:#aaa;letter-spacing:.18em;margin:.2rem 0 .8rem;font-size:clamp(12px,3.6vw,14px)}

/* 薄ノイズ（背景） */
#noise{position:fixed;inset:0;z-index:1;pointer-events:none;
  background:rgba(255,255,255,.02);}

/* レトロUI＋CRT（安定版） */
.browser.retro{position:relative;z-index:2;width:100%;max-width:900px;background:#c0c0c0;border:2px solid #000;
  box-shadow:0 0 0 1px #fff inset,0 0 0 2px #808080 inset,0 0 0 3px #fff inset;overflow:hidden;margin:0 auto}
.retro-titlebar{display:flex;align-items:center;justify-content:space-between;background:#000080;color:#fff;padding:6px 8px;letter-spacing:.3em;font-size:.9rem;user-select:none}
.retro-title{font-weight:bold}
.retro-controls{display:flex;gap:6px}
.retro-controls .ctrl{min-width:22px;text-align:center;padding:2px 4px;background:#c0c0c0;color:#000;border:2px solid #000;
  box-shadow:0 0 0 1px #fff inset,0 0 0 2px #808080 inset,0 0 0 3px #fff inset}
.retro-pane{padding:12px;text-align:left;color:#000;background:#c0c0c0;position:relative}
.browser.retro.crt::after{
  content:"";position:absolute;inset:0;pointer-events:none;z-index:5;
  background:repeating-linear-gradient(to bottom,rgba(255,255,255,.055),rgba(255,255,255,.055) 1px,transparent 1px,transparent 3px);
  mix-blend-mode:overlay;opacity:.45
}

/* 画面別ノイズGIF：今は“無効”（安定最優先） */
/* 後で有効化するなら以下コメントアウト外して使う
#screen-story::before{
  content:"";position:absolute;inset:0;z-index:3;pointer-events:none;
  background:url('assets/noise_story.gif') repeat; background-size:300px auto; opacity:.24; mix-blend-mode:normal;
}
*/

/* スクロールボックス（横スクロール禁止） */
.scrollbox{
  max-height:55vh;overflow-y:auto;overflow-x:hidden;padding:10px;background:#fff;color:#111;border:2px solid #000;
  box-shadow:0 0 0 1px #fff inset,0 0 0 2px #808080 inset,0 0 0 3px #fff inset
}
.scrollbox::-webkit-scrollbar{width:10px}
.scrollbox::-webkit-scrollbar-track{background:#c0c0c0;box-shadow:inset 1px 1px 0 #fff,inset -1px -1px 0 #808080}
.scrollbox::-webkit-scrollbar-thumb{background:#e0e0e0;border:2px solid #000;box-shadow:inset 0 0 0 1px #fff,inset 0 0 0 2px #808080,inset 0 0 0 3px #fff}

/* 行間を詰める（発祥ストーリー） */
#story-text p{ line-height:1.45; margin:0 0 .55em 0; font-size:clamp(14px,3.9vw,18px) }

/* ボタン */
.btn{
  background:#c0c0c0;color:#000;border:2px solid #000;
  box-shadow:0 0 0 1px #fff inset,0 0 0 2px #808080 inset,0 0 0 3px #fff inset;
  border-radius:2px;margin-top:16px;padding:.55rem 1rem;cursor:pointer;transition:transform .1s,color .2s,box-shadow .12s}
.btn:hover{color:#8b0000}
.btn:active{box-shadow:0 0 0 1px #808080 inset,0 0 0 2px #fff inset,0 0 0 3px #808080 inset;transform:translateY(1px) scale(.99)}

/* 入力 */
.entry-form{display:flex;gap:10px;align-items:center;margin:.6rem 0 .4rem;justify-content:center}
#entry-name{width:100%;max-width:360px;padding:.5rem .6rem;background:#fff;color:#111;border:2px solid #000;
  box-shadow:0 0 0 1px #fff inset,0 0 0 2px #808080 inset,0 0 0 3px #fff inset}
#entry-name:focus{outline:none;border-color:#8b0000}
.entry-note{color:#333;font-size:.85rem;margin:.2rem 0 0}

/* フェードアップ */
.fade-up{opacity:0;transform:translateY(24px)}
.fade-up.show{opacity:1;transform:translateY(0);transition:opacity .36s ease, transform .36s ease}
